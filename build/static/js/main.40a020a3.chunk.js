(this.webpackJsonproster=this.webpackJsonproster||[]).push([[0],{115:function(e,t,a){},152:function(e,t,a){e.exports=a(251)},157:function(e,t,a){},158:function(e,t,a){},247:function(e,t,a){},251:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),c=a.n(l),o=(a(157),a(5)),i=(a(158),a(21)),s=a(19),u=a(3);function m(e){var t=e.profile;return r.a.createElement("div",{className:"col-sm profile-hover"},r.a.createElement("div",{className:"cnt-block equal-hight"},r.a.createElement("figure",null,r.a.createElement("img",{src:"../images/Glen-Avatar.png",className:"img-responsive",alt:""})),r.a.createElement("h3",null,r.a.createElement("a",{href:t.portfolio,target:"_blank",rel:"noopener noreferrer"},t.name)),r.a.createElement("p",null,t.titile),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(u.q,{fab:!0,icon:"linkedin"}))),r.a.createElement("div",null,r.a.createElement("a",{href:t.github,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(u.q,{fab:!0,icon:"github"}))))))}var d=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Contact Us"),r.a.createElement("center",null,r.a.createElement("div",{className:"borderForm"},r.a.createElement("h1",null,"We'd love to hear from you"),r.a.createElement("p",null,"If you have a question about features or working of this website, or would to like see other projects done by us, please click on links below to our personal Github pages."))),r.a.createElement("section",{className:"our-team padding-lg"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},[{name:"Glen Jones",title:"Software Engineer",portfolio:"https://www.glenjones.com.au/",linkedin:"https://www.linkedin.com/in/mrglenjones/",github:"https://github.com/mistergjones"},{name:"Peter Hristakos",title:"Software Engineer",portfolio:"http://peter-hristakos.surge.sh/",linkedin:"https://www.linkedin.com/in/peter-hristakos/",github:"https://github.com/Hristakos"},{name:"Shailesh Karki",title:"Software Engineer",portfolio:"http://shaileshkarki.surge.sh/",linkedin:"https://www.linkedin.com/in/shaileshkarki/",github:"https://github.com/shaileshkarki"}].map((function(e,t){return r.a.createElement(m,{key:t,profile:e})}))))))},f=a(7),p=a.n(f),b=a(9),g=a(10),E=a.n(g),h=a(24),v=Object(n.createContext)();function y(){return Object(n.useContext)(v)}var w=a(6);var k=function(e){var t,a=Object(n.useState)(!1),l=Object(o.a)(a,2),c=l[0],i=l[1],m=Object(n.useState)(!1),d=Object(o.a)(m,2),f=(d[0],d[1]),g=Object(n.useState)(""),v=Object(o.a)(g,2),k=v[0],x=v[1],O=Object(n.useState)(""),j=Object(o.a)(O,2),S=j[0],N=j[1],C=y().setAuthTokens;t=null!==e.location.state?e.location.state.referer:"/";var _=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.a.post("/users/login",{user:{email:k,password:S}});case 4:(a=e.sent).data[0].email===k?(C(a.data[0]),i(!0)):(f(!0),alert(a.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f(!0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement(s.a,{to:t}):r.a.createElement("div",null,r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"6",lg:"5",xl:"5",className:"grey-text"},r.a.createElement("form",{onSubmit:_,className:"staff-new-form border border-light p-5"},r.a.createElement("p",{className:"text-center h4  mb-4"},"Sign in"),r.a.createElement("div",null,r.a.createElement(u.s,{label:"Your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",required:!0,name:"email",onChange:function(e){x(e.target.value)},minLength:"8",maxLength:"50",onInvalid:w.invalidEmailMsg,onInput:w.invalidEmailMsg,value:k,pattern:"^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$"}),r.a.createElement(u.s,{label:"Your password",icon:"lock",required:!0,group:!0,type:"password",validate:!0,name:"password",onChange:function(e){N(e.target.value)},minLength:6,maxLength:20,onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,6,20)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,6,20)},value:S})),r.a.createElement("div",{className:"text-center"},r.a.createElement(h.a,{type:"submit",value:"Submit",className:"btn btn-info my-4 btn-block"},"Login"))))))},x=a(28),O=a(29),j=a(31),S=a(30),N=function(e){Object(j.a)(a,e);var t=Object(S.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){return r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"8"},r.a.createElement("div",{className:"border border-light p-5 md-6"},r.a.createElement("div",null,r.a.createElement("h1",null,"Features for the users. "),r.a.createElement("p",null,"It allows a user to register, login and search their shifts"," "),r.a.createElement("p",null,"Allows user to put in availability for upcoming roster"),r.a.createElement("p",null,"Allows rostering manager to create roster allocating shifts to staff")),r.a.createElement("div",null,r.a.createElement("h1",null,"Features about the application:"),r.a.createElement("p",null,"Technologis used: Javascript,React, CSS/HTML, Node, Express and Postgres SQL"),r.a.createElement("p",null,"Passwords are hashed prior before database storing."),r.a.createElement("p",null,"Axios utilsed for processing RESTFUL API requests"),r.a.createElement("p",null,"MDB utilised for GUI")))))}}]),a}(r.a.Component),C=a(279),_=function(e){Object(j.a)(a,e);var t=Object(S.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{class:"text-left"},r.a.createElement(C.a,null,r.a.createElement("h2",null,"Welcome to Roster Application"),r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.")))}}]),a}(r.a.Component);var M=a(33);a(106);var D=function(e){var t=y().authTokens;return r.a.createElement(u.B,{center:!0,className:"m-1"},null!=t&&(t.role.includes("Manager")||t.role.includes("Supervisor"))?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.i,{sm:"6",md:"3",lg:"2",xl:"2"},r.a.createElement(u.l,null,r.a.createElement(u.o,{caret:!0,color:"secondary"},"Roster Menu"),r.a.createElement(u.n,{color:"secondary",basic:!0},r.a.createElement(u.m,{href:"/ViewRosterScreen"},"View Roster"),r.a.createElement(u.m,{divider:!0}),r.a.createElement(u.m,{href:"/CreateRosterScreen"},"Create Roster"),r.a.createElement(u.m,{divider:!0}),r.a.createElement(u.m,{href:"/ViewRosterScreen2"},"Edit Roster")))),r.a.createElement(u.i,{sm:"6",md:"3",lg:"2",xl:"2"},r.a.createElement(u.l,null,r.a.createElement(u.o,{caret:!0,color:"secondary"},"User Menu"),r.a.createElement(u.n,{basic:!0},r.a.createElement(u.m,{href:"/StaffListScreen"},"View Staffs"),r.a.createElement(u.m,{divider:!0}),r.a.createElement(u.m,{href:"/StaffNewScreen"},"Add New Staff"),r.a.createElement(u.m,{divider:!0}),r.a.createElement(u.m,{href:"/ViewGroups"},"View Roles"),r.a.createElement(u.m,{divider:!0}),r.a.createElement(u.m,{href:"/createGroup"},"Create New Role")))),r.a.createElement(u.i,{sm:"6",md:"3",lg:"2",xl:"2"},r.a.createElement(u.l,null,r.a.createElement(u.o,{caret:!0,color:"secondary"},"WAGE & OTHERS"),r.a.createElement(u.n,{basic:!0},r.a.createElement(u.m,{href:"/wages"},"View Wage Report"),r.a.createElement(u.m,{divider:!0}),r.a.createElement(u.m,{href:"/PublicHolidays"},"View Public Holidays"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.i,{sm:"6",md:"3",lg:"2",xl:"2"},r.a.createElement(h.a,{className:"w-100 h-100 d-inline-block m-1",variant:"primary",href:"/ViewRosterScreen"},"View Roster")),r.a.createElement(u.i,{sm:"6",md:"3",lg:"2",xl:"2"},r.a.createElement(h.a,{className:"w-100 h-100 d-inline-block m-1",variant:"danger",href:"/wages"},"View Wage Reports")),r.a.createElement(u.i,{sm:"6",md:"3",lg:"2",xl:"2"},r.a.createElement(h.a,{className:"w-100 h-100 d-inline-block m-1",variant:"danger",href:"/PublicHolidays"},"Public Holidays"))))},T=[{label:"ID",key:"staff_id"},{label:"First Name",key:"firstname"},{label:"Last Name",key:"lastname"},{label:"Address",key:"address"},{label:"City",key:"city"},{label:"State",key:"state"},{label:"Post Code",key:"postcode"},{label:"Email",key:"email"},{label:"Phone",key:"phone_number"}],I=[{label:"ID",key:"staff_id"},{label:"First Name",key:"firstname"},{label:"Last Name",key:"lastname"},{label:"Address",key:"address"},{label:"City",key:"city"},{label:"State",key:"state"},{label:"Post Code",key:"postcode"},{label:"Email",key:"email"},{label:"Phone",key:"phone_number"},{label:"Photo",key:"photo"},{label:"Roles",key:"roles"}];var R=function(e){var t=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1];return{data:a,request:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/staff/withroles");case 2:return t=e.sent,r(t.data),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}(),a=t.data,l=t.request;return Object(n.useEffect)((function(){l()}),[]),r.a.createElement("div",null,r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(D,null))),r.a.createElement(M.a,{dataSet:a,searchData:T,tableData:I,handleItemClick:!0,itemClickRedirect:"/StaffEditScreen",itemsPerPage:20}),r.a.createElement(u.B,{className:"button-panel"},r.a.createElement(u.i,null,r.a.createElement(h.a,{href:"/StaffNewScreen",block:!0},"Create New Staff")),r.a.createElement(u.i,null,r.a.createElement(h.a,{href:"/admin",block:!0},"Back"))))},B=(a(53),a(13));function L(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],l=a[1];return{data:r,request:function(){var t=Object(b.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get(e);case 2:return a=t.sent,l(a.data),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}var q=function(e){var t=e.data,a=Object(n.useState)(t?t.staff_id:""),l=Object(o.a)(a,1)[0],c=Object(n.useState)(t?t.firstname:""),i=Object(o.a)(c,2),m=i[0],d=i[1],f=Object(n.useState)(t?t.lastname:""),g=Object(o.a)(f,2),v=g[0],y=g[1],k=Object(n.useState)(t?t.address:""),x=Object(o.a)(k,2),O=x[0],j=x[1],S=Object(n.useState)(t?t.city:""),N=Object(o.a)(S,2),C=N[0],_=N[1],M=Object(n.useState)(t?t.state:""),D=Object(o.a)(M,2),T=D[0],I=D[1],R=Object(n.useState)(t?t.postcode:""),q=Object(o.a)(R,2),W=q[0],P=q[1],H=Object(n.useState)(t?t.email:""),A=Object(o.a)(H,2),V=A[0],z=A[1],G=Object(n.useState)(t?t.phone_number:""),F=Object(o.a)(G,2),U=F[0],$=F[1],J=Object(n.useState)([]),Y=Object(o.a)(J,2),K=Y[0],Q=Y[1],X=L("/groups"),Z=X.data,ee=X.request,te=L("/staff/assignedroles/".concat(l)),ae=(te.data,te.request),ne=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:if(t=e.sent,a={data:[]},""===l){e.next=8;break}return e.next=7,ae();case 7:a=e.sent;case 8:for(n=0;n<t.data.length;n++)for(r=0;r<a.data.length;r++)a.data[r].staff_role_id===t.data[n].id&&(t.data[n].checked=!0);Q(t.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){ne()}),[]);var re=Object(s.g)(),le=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Delete"),e.next=3,E.a.put("/staff/remove/".concat(l),{removedStaffMember:{staffId:l,firstname:m,lastname:v,address:O,city:C,state:T,postCode:W,email:V,phone:U,isActive:!1}});case 3:a=e.sent,console.log(a.status),200===a.status?(console.log(a.statusText),re.replace("/StaffListScreen")):alert(a.statusText);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,E.a.get("/staff/email/".concat(V,"/").concat(l));case 3:if(!1!==e.sent.data){e.next=7;break}return alert(V+" already exists"),e.abrupt("return");case 7:for(a=!1,n=[],Z.forEach((function(e){console.log("update groups = "+e.title+" checked = "+e.checked)})),r=0;r<Z.length;r++)Z[r].checked&&(a=!0,n.push(Z[r]));if(a){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,E.a.put("/staff/".concat(l),{updatedStaffMember:{staffId:l,firstname:m,lastname:v,address:O,city:C,state:T,postCode:W,email:V,phone:U,roles:n}});case 15:c=e.sent,console.log(c.status),200===c.status?(console.log(c.statusText),re.replace("/StaffListScreen")):alert(c.statusText);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,E.a.get("/staff/email/".concat(V));case 3:if(!1!==e.sent.data){e.next=7;break}return alert(V+" already exists"),e.abrupt("return");case 7:for(Z.forEach((function(e){console.log("submit groups = "+e.title+" checked = "+e.checked)})),a=!1,n=[],r=0;r<Z.length;r++)Z[r].checked&&(a=!0,n.push(Z[r]));if(a){e.next=13;break}return e.abrupt("return");case 13:return e.prev=13,e.next=16,E.a.post("/staff",{newStaffMember:{firstname:m,lastname:v,address:O,city:C,state:T,postCode:W,email:V,phone:U,isActive:!0,roles:n}});case 16:200===(l=e.sent).status&&(console.log(l.statusText),re.replace("/StaffListScreen")),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),alert("".concat(e.t0.response.statusText," \n").concat(e.t0,"\n").concat(e.t0.response.data));case 23:case"end":return e.stop()}}),e,null,[[13,20]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7",className:"grey-text"},r.a.createElement("form",{className:"staff-new-form border border-light",onSubmit:t?ce:oe},r.a.createElement("p",{className:"h5 text-center "},t?"Edit Staff":"Add New Staff"),r.a.createElement("div",null,r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},K.map((function(e,t){return r.a.createElement("div",{key:t,className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",defaultChecked:e.checked,id:"".concat(e.id),onChange:function(){for(var t=Object(B.a)(K),a=0;a<t.length;a++)if(t[a].id===e.id){t[a].checked=!t[a].checked,console.log("role = "+e.title+"checked = "+t[a].checked);break}Q(Object(B.a)(t))}}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"".concat(e.id)},e.title))}))))),r.a.createElement("div",{className:"grey-text"},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"First Name",icon:"user-circle",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"firstname",minLength:"2",maxLength:"20",onChange:function(e){d(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,2,20)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,2,20)},autoComplete:"new-password",value:m}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"Last Name",icon:"user-circle",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"lastname",minLength:"2",maxLength:"20",onChange:function(e){y(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,2,20)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,2,20)},autoComplete:"new-password",value:v}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"Address",icon:"address-card",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"address",minLength:"3",maxLength:"50",onChange:function(e){j(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,3,50)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,3,50)},autoComplete:"new-password",value:O}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"City",icon:"map",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"city",minLength:"3",maxLength:"20",onChange:function(e){_(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,3,20)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,3,20)},autoComplete:"new-password",value:C}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"State",icon:"location-arrow",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"state",minLength:"3",maxLength:"3",onChange:function(e){I(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,3,20)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,3,20)},autoComplete:"new-password",value:T}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"Post Code",icon:"map-signs",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"postcode",minLength:"4",maxLength:"4",onChange:function(e){P(e.target.value)},onInvalid:function(e){return Object(w.invalidNumber)(e,4,4)},onInput:function(e){return Object(w.invalidNumber)(e,4,4)},autoComplete:"new-password",value:W}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"Email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",required:!0,name:"email",onChange:function(e){z(e.target.value.toLowerCase())},minLength:"3",maxLength:"50",onInvalid:w.invalidEmailMsg,onInput:w.invalidEmailMsg,autoComplete:"new-password",pattern:"^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$",value:V}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"Phone",icon:"phone",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,minLength:"10",maxLength:"10",name:"phone",onChange:function(e){$(e.target.value)},onInvalid:function(e){return Object(w.invalidNumber)(e,10,10)},onInput:function(e){return Object(w.invalidNumber)(e,10,10)},autoComplete:"old-password",value:U}))),r.a.createElement(u.i,null,r.a.createElement("input",{style:{display:"none"},type:"label",name:"email2"}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(h.a,{type:"submit",value:"Submit",className:"btn btn-primary my-3 btn-block mr-2"},t?"Update Staff":"Create New Staff")),t?r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(h.a,{value:"Submit",className:"btn btn-danger my-3 btn-block mr-2",onClick:le},"Remove Staff Memebr")):"",r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(h.a,{className:"btn btn-primary my-3 btn-block",href:"/StaffListScreen"},"Back")))))))};var W=function(e){return r.a.createElement("div",null,r.a.createElement(q,null))};var P=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement(q,{data:t.state}))};r.a.Component,r.a.Component;var H=function(e){return r.a.createElement("div",null,r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,null,r.a.createElement(D,null))),r.a.createElement(u.B,null,r.a.createElement(u.i,null)))};n.Component;var A=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],c=a[1],i=y(),m=i.authTokens,d=i.setAuthTokens;return console.log("nvbar authContext",m),r.a.createElement(u.v,{color:"indigo",dark:!0,expand:"md"},r.a.createElement(u.w,null,r.a.createElement("strong",{className:"white-text"},"Roster")),r.a.createElement(u.y,{onClick:function(){c(!l)}}),r.a.createElement(u.j,{id:"navbarCollapse3",isOpen:l,navbar:!0},r.a.createElement(u.x,{left:!0},r.a.createElement(u.t,{active:!0},r.a.createElement(u.u,{exact:!0,to:"/"},"Home")),r.a.createElement(u.t,null,r.a.createElement(u.u,{to:"/about"},"About")),r.a.createElement(u.t,null,r.a.createElement(u.u,{to:"/contact"},"Contact Us")),r.a.createElement(u.t,null,r.a.createElement(u.u,{to:"/admin"},"Admin"))),r.a.createElement(u.x,{right:!0},m?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.u,{to:"#"},m.email)," ",r.a.createElement(u.b,{onClick:function(){return d(null),r.a.createElement(s.a,{to:"/"})}},"Log out")):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.u,{to:"/register"},"Register")," ",r.a.createElement(u.u,{to:"/login"},"Login")))))},V=a(48);var z=function(e){Object(V.a)(e);var t=Object(n.useState)(""),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),d=m[0],f=m[1],g=Object(n.useState)(""),h=Object(o.a)(g,2),v=h[0],y=h[1],k=Object(s.g)(),x=function(e,t,a){var n=e.target.nextElementSibling.textContent;return""===e.target.value?(e.target.setCustomValidity("".concat(n," is required")),Object(w.displayInvalid)(e.target,"red")):e.target.validity.tooShort?(e.target.setCustomValidity("".concat(n," needs to be at least ").concat(t," characters long.")),Object(w.displayInvalid)(e.target,"red")):e.target.validity.tooLong?(e.target.setCustomValidity("".concat(n," name needs to be between ").concat(t," and ").concat(a," characters long.")),Object(w.displayInvalid)(e.target,"red")):e.target.value!==d?(Object(w.displayInvalid)(e.target,"red"),e.target.setCustomValidity("Password and Re-password did not match")):(e.target.setCustomValidity(""),Object(w.displayValid)(e.target)),!0},O=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.a.post("/users/register",{user:{email:l,password:d}});case 4:a=e.sent,console.log("location"),!0===a.data?(alert("user created"),k.push("/")):alert("Email already exists"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"6",lg:"5",xl:"5",className:"grey-text"},r.a.createElement("form",{className:"staff-new-form border border-light p-5",onSubmit:O},r.a.createElement("p",{className:"text-center h4 mb-4"},"Register"),r.a.createElement(u.s,{label:"Type your email",icon:"envelope",type:"email",validate:!0,error:"wrong",success:"right",required:!0,id:"defaultRegisterFormEmail",class:"form-control mb-4",placeholder:"E-mail",name:"email",onChange:function(e){c(e.target.value)},minLength:"8",maxLength:"50",onInvalid:w.invalidEmailMsg,onInput:w.invalidEmailMsg,pattern:"^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$",value:l}),r.a.createElement(u.s,{label:"Type your password",icon:"lock",type:"password",id:"defaultRegisterFormPassword",className:"form-control",placeholder:"Password","aria-describedby":"defaultRegisterFormPasswordHelpBlock",validate:!0,required:!0,name:"password",onChange:function(e){f(e.target.value)},minLength:6,maxLength:20,onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,6,20)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,6,20)},value:d}),r.a.createElement(u.s,{label:"Type your re-password",icon:"lock",type:"password",id:"defaultRegisterFormRePassword",class:"form-control",placeholder:"Re-Password","aria-describedby":"defaultRegisterFormPasswordHelpBlock",validate:!0,required:!0,name:"repassword",onChange:function(e){y(e.target.value)},minLength:6,maxLength:20,onInvalid:function(e){return x(e,6,20)},onInput:function(e){return x(e,6,20)},value:v}),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"btn btn-info my-4 btn-block",type:"submit"},"Register"),r.a.createElement("p",null,"or sign up with:(under development)"),r.a.createElement("a",{href:"#",class:"mx-2",role:"button"},r.a.createElement("i",{class:"fab fa-facebook-f light-blue-text"})),r.a.createElement("a",{href:"#",class:"mx-2",role:"button"},r.a.createElement("i",{class:"fab fa-twitter light-blue-text"})),r.a.createElement("a",{href:"#",class:"mx-2",role:"button"},r.a.createElement("i",{class:"fab fa-linkedin-in light-blue-text"})),r.a.createElement("a",{href:"#",class:"mx-2",role:"button"},r.a.createElement("i",{class:"fab fa-github light-blue-text"})),r.a.createElement("hr",null),r.a.createElement("p",null,"By clicking",r.a.createElement("em",null,"Sign up")," you agree to our",r.a.createElement("a",{href:"",target:"_blank"},"terms of service"))))))},G=[{label:"ID",key:"phol_id"},{label:"State",key:"phol_state"},{label:"Date",key:"phol_date"},{label:"Name",key:"phol_name"}],F=[{label:"ID",key:"phol_id"},{label:"State",key:"phol_state"},{label:"Date",key:"phol_date"},{label:"Name",key:"phol_name"}];var U=function(e){var t=L("/pubholidays"),a=t.data,l=t.request;Object(n.useEffect)((function(){l()}),[]);for(var c=0;c<a.length;c++){var o=a[c].phol_date;a[c].phol_date=o.slice(0,10)}var i=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,E.a.put("/pubholidays",{});case 3:a=e.sent,console.log(a.status),l();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(D,null)),r.a.createElement("button",{onClick:i,className:"btn btn-primary"},"Load Public holidays"),r.a.createElement(M.a,{dataSet:a,searchData:G,tableData:F,handleItemClick:!1,itemsPerPage:20}))},$=a(127),J=a.n($),Y=(a(243),a(11)),K=a.n(Y);a(115);var Q=function(e){var t=e.startTime,a=e.endTime,l=e.name,c=e.handleAllocate,i=e.handleDeallocate,s=e.handleRemoveShift,m=e.handleClose,d=e.event,f=e.staff,p=e.id,b=e.shiftId,g=a-t,E=Object(n.useState)(l),v=Object(o.a)(E,2),y=v[0],w=v[1],k=Object(n.useState)(0),x=Object(o.a)(k,2),O=x[0],j=x[1];return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup-inner"},r.a.createElement("div",{className:"popup-wrapper"},r.a.createElement(u.k,null,r.a.createElement(u.d,null,r.a.createElement(u.g,{color:"blue lighten-1"}," ","Date ",K()(t).format("dddd, MMMM Do YYYY")),r.a.createElement(u.e,null,r.a.createElement(u.h,null,"Shift Detail"),r.a.createElement("div",null,"Name ",y),r.a.createElement("div",null,"Start Time: ".concat(K()(t).format("h:mm a"))),r.a.createElement("div",null,"End Time: : ".concat(K()(a).format("h:mm a"))),r.a.createElement("div",null,"Duration: ".concat((g/60/1e3/60).toFixed(2)," hrs")),r.a.createElement("div",null,r.a.createElement(u.c,null,r.a.createElement(u.l,null,r.a.createElement(h.a,{className:"btn btn-primary mr-0"},y),r.a.createElement(u.o,{caret:!0,color:"primary"}),r.a.createElement(u.n,{color:"primary"},f.map((function(e,t){return r.a.createElement(u.m,{key:t,onClick:function(t){w(e.name),j(e.staff_member_id),console.log("member = ",e.name)}},e.name)}))))))),r.a.createElement(u.f,{className:"button-panel"},r.a.createElement(h.a,{className:"btn btn-green my-3 btn-block mr-2",onClick:function(){return c(y,p,d,O)}},"Allocate"),r.a.createElement(h.a,{className:"btn btn-danger my-3 btn-block mr-2",onClick:function(){return s(b)}},"Remove Shift"),r.a.createElement(h.a,{className:"btn btn-danger my-3 btn-block mr-2",onClick:function(){return i(y,p,d)}},"Deallocate"),r.a.createElement(h.a,{className:"btn btn-primary my-3 btn-block mr-2",onClick:m},"close")))))))};var X=function(e){var t=e.groups,a=e.handleClose,l=e.handleAddItem,c=e.weekNumber,i=e.items,s=e.handleSetAddShift,m=e.startDate,d=Object(n.useState)(t[0]),f=Object(o.a)(d,2),p=f[0],b=f[1],g=Object(n.useState)(0),E=Object(o.a)(g,2),v=(E[0],E[1],function(){var e=K()();console.log("test",K.a.unix(Math.round(m.getTime()/1e3)));var t=K.a.unix(Math.round(m.getTime()/1e3)),a=15*Math.round(e.minutes()/15);return t.hour(e.hour()).minutes(a),t});return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popup-inner"},r.a.createElement("div",{className:"popup-wrapper"},r.a.createElement(u.k,null,r.a.createElement(u.d,null,r.a.createElement(u.g,{color:"blue lighten-1"}," "),r.a.createElement(u.e,null,r.a.createElement(u.h,null,"Shift Detail"),r.a.createElement("div",null,"Group "),r.a.createElement("div",null,r.a.createElement(u.c,null,r.a.createElement(u.l,null,r.a.createElement(h.a,{className:"btn btn-primary mr-0"},p.title),r.a.createElement(u.o,{caret:!0,color:"primary"}),r.a.createElement(u.n,{color:"primary"},t.map((function(e,t){return r.a.createElement(u.m,{key:t,onClick:function(t){b(e)}},e.title)}))))))),r.a.createElement(u.f,{className:"button-panel"},r.a.createElement(h.a,{className:"btn btn-green my-3 btn-block mr-2",onClick:function(){console.log("add shift");var e=Object(B.a)(i),t=e.sort((function(e,t){return t.id-e.id}));console.log("sort id = "+t[0].id);var a={id:t[0].id+1,shift_id:t[0].id+1,group:p.id,title:"Unallocated",weekNumber:c,start_time:K.a.unix(v().unix()),end_time:K.a.unix(v().add(p.group_duration,"hour").unix()),canMove:!0,canResize:!0,staff_id:1,isallocated:!0};e.push(a),l(Object(B.a)(e)),s(null)}},"Add"),r.a.createElement(h.a,{className:"btn btn-primary my-3 btn-block mr-2",onClick:a},"close")))))))};var Z=function(e){var t=e.shifts,a=e.groups,l=e.weekNumber,c=e.create,i=e.startDate,u=e.endDate,m=e.title;console.log("^^^^^",new Date(i).toISOString()),console.log("groups",a),console.log("start date = "+i+" end date = "+u);var d=Object(n.useState)(t),f=Object(o.a)(d,2),g=f[0],v=f[1],y=Object(n.useState)(a),w=Object(o.a)(y,2),k=w[0],x=(w[1],Object(n.useState)(l)),O=Object(o.a)(x,2),j=O[0],S=(O[1],Object(n.useState)(null)),N=Object(o.a)(S,2),C=N[0],_=N[1],M=Object(n.useState)(null),D=Object(o.a)(M,2),T=D[0],I=D[1],R=L("/staff/roles"),q=R.data,W=R.request,P=Object(n.useState)(new Date(i)),H=Object(o.a)(P,2),A=H[0],V=(H[1],Object(n.useState)(K()(u).add(24,"hours"))),z=Object(o.a)(V,2),G=z[0],F=(z[1],Object(s.g)());console.log("items ===",g),Object(n.useEffect)((function(){console.log(1),function(){for(var e=Object(B.a)(t),a=0;a<t.length;a++)console.log("transformedData[i].start_time",e[a].start_time),e[a].start_time=K.a.unix(e[a].start_time),e[a].end_time=K.a.unix(e[a].end_time),e[a].id=a+1;console.log(2),console.log("transform items === ",e),v(e),console.log(3)}(),W()}),[]),console.log(4),console.log("items ===",g);var U=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!c){e.next=14;break}return e.prev=2,e.next=5,E.a.post("/roster",{shifts:g,weekNumber:l,title:m,startDate:i,endDate:u});case 5:200===(a=e.sent).status&&(console.log(a.statusText),F.replace("/admin")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert("".concat(e.t0.response.statusText," \n").concat(e.t0,"\n").concat(e.t0.response.data));case 12:e.next=24;break;case 14:return e.prev=14,e.next=17,E.a.put("/roster",{shifts:g,weekNumber:l});case 17:200===(n=e.sent).status&&(console.log(n.statusText),F.replace("/admin")),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(14),alert("".concat(e.t1.response.statusText," \n").concat(e.t1,"\n").concat(e.t1.response.data));case 24:case"end":return e.stop()}}),e,null,[[2,9],[14,21]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Week Number: ",j),r.a.createElement("h2",null,"Start Date: ",A.toLocaleDateString()),r.a.createElement("h2",null,"End Date: ",new Date(u).toLocaleDateString())),r.a.createElement("div",{className:"button-panel"},r.a.createElement(h.a,{className:"btn btn-green my-3 btn-block mr-2",onClick:U},c?"Save Roster":"Update Roster"),r.a.createElement(h.a,{className:"btn btn-primary my-3 btn-block mr-2",onClick:function(){I(!0)}},"Add Shift"),r.a.createElement(h.a,{href:"/admin",className:"btn btn-primary my-3 btn-block mr-2"},"close")),r.a.createElement(J.a,{className:"timeline",onItemContextMenu:function(e,t,a){return console.log("context",e,t)},groups:k,items:g,onItemResize:function(e,t,a){return function(e,t,a){console.log("resize time = ",t),console.log("unix ",K()(t).toLocaleString());var n=Object(B.a)(g);n.forEach((function(a){var n=a.start_time,r=a.end_time-n;a.id===e&&(K()(t).unix()>K()(a.start_time).add(2.75,"hour").unix()?(a.end_time=t,console.log(a.title),console.log("duration",r/60/1e3)):alert("Minimum shift is 3hrs"))})),v(Object(B.a)(n))}(e,t)},defaultTimeStart:A,defaultTimeEnd:G,lineHeight:100,onItemMove:function(e,t){return function(e,t){var a=Object(B.a)(g);a.forEach((function(a){var n=a.start_time,r=a.end_time-n;a.id===e&&(a.start_time=t,a.end_time=t+r)})),v(Object(B.a)(a))}(e,t)},onItemClick:function(e,t,a){return function(e,t,a){console.log("clicked ",e,t,a);for(var n=function(a){if(g[a].id===e){console.log("Name = ",g[a].title),console.log("Start time = ",K()(g[a].start_time).toLocaleString()),console.log("Finish time = ",K()(g[a].end_time).toLocaleString());var n=g[a].end_time-g[a].start_time;console.log("staff id = ",g[a].staffId),console.log("staff = ",q),console.log("duration = ",n/60/1e3/60);var r=q.filter((function(e){if(e.staff_role_id===g[a].group)return e}));return console.log("filtered staff",r),_({startTime:g[a].start_time,endTime:g[a].end_time,name:g[a].title,event:t,filteredStaff:r,id:g[a].id,shiftId:g[a].shift_id}),{v:void 0}}},r=0;r<g.length;r++){var l=n(r);if("object"===typeof l)return l.v}}(e,t,a)},itemRenderer:function(e){var t=e.item,a=(e.timelineContext,e.itemContext),n=e.getItemProps,l=(0,e.getResizeProps)(),c=l.left,o=l.right,i=a.selected?a.dragging?"red":"beige":"unallocated"===a.title.toLowerCase()?"red":"green";a.resizing||t.color;return r.a.createElement("div",n({style:{backgroundColor:i,color:t.color,borderRadius:4,borderLeftWidth:a.selected?3:1,borderRightWidth:a.selected?3:1}}),a.useResizeHandle?r.a.createElement("div",c):null,r.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"}},r.a.createElement("div",{style:{height:"100%",lineHeight:"initial",textAlign:"left"}},"Start:",K()(t.start_time).format("h:mm a")),r.a.createElement("div",{style:{height:"100%",lineHeight:"initial"}},a.title),r.a.createElement("div",{style:{height:"100%",textAlign:"left",lineHeight:"initial"}},"End: ",K()(t.end_time).format("h:mm a"))),a.useResizeHandle?r.a.createElement("div",o):null)},timeSteps:{minute:30,hour:1,day:1,month:1,year:1}}),C&&r.a.createElement(Q,{staff:C.filteredStaff,startTime:C.startTime,endTime:C.endTime,handleAllocate:function(e,t,a,n){for(var r=Object(B.a)(g),l=0;l<r.length;l++)if(console.log("newItems[i].id = ",r[l].id),console.log("id = ",t),r[l].id===t){console.log(r[l].title),r[l].title=e,console.log(r[l].title),console.log(r[l].selected),r[l].staff_id=n;break}_(null),v(Object(B.a)(r))},name:C.name,handleDeallocate:function(e,t,a){for(var n=Object(B.a)(g),r=0;r<n.length;r++)if(n[r].id===t){console.log(n[r].title),n[r].title="Unallocated",console.log(n[r].title),n[r].staff_id="none";break}_(null),v(Object(B.a)(n))},handleRemoveShift:function(e){for(var t=Object(B.a)(g),a=0;a<t.length;a++)if(t[a].shift_id===e){t.isallocated=!1,t.splice(a,1);break}_(null),v(Object(B.a)(t))},handleClose:function(){_(null)},event:C.event,id:C.id,shiftId:C.shiftId}),T&&r.a.createElement(X,{groups:k,handleClose:function(){I(null)},handleAddItem:v,items:g,handleSetAddShift:I,weekNumber:l,startDate:A}))};var ee=function(e){var t=e.location;return console.log("location",t.state),r.a.createElement(Z,{shifts:t.state[0],groups:t.state[1],weekNumber:t.state[2],create:!0,startDate:t.state[3],endDate:t.state[4],title:t.state[5]})},te=a(133),ae=a(22),ne=a(280),re=a(59);var le=function(e){var t=function(){console.log("test",K.a.unix(Math.round(N.getTime()/1e3)));var e=K.a.unix(Math.round(N.getTime()/1e3)),t=15*Math.round(e.minutes()/15);return e.minutes(t),e},a=L("/groups"),l=a.data,c=a.request,i=L("/roster/weeknumber"),m=i.data,d=i.request,f=Object(n.useState)({}),p=Object(o.a)(f,2),b=(p[0],p[1],Object(n.useState)([])),g=Object(o.a)(b,2),E=g[0],v=g[1],y=Object(n.useState)(m.weekNumber),k=Object(o.a)(y,2),x=k[0],O=k[1],j=Object(n.useState)(new Date),S=Object(o.a)(j,2),N=S[0],C=S[1],_=Object(n.useState)(new Date((new Date).setDate((new Date).getDate()+6))),M=Object(o.a)(_,2),D=M[0],T=M[1],I=Object(n.useState)(m.weekNumber),R=Object(o.a)(I,2),B=R[0],q=R[1],W=Object(s.g)();Object(n.useEffect)((function(){c(),d(),console.log(m);var e=K.a.unix(1598346e3);e.unix();console.log("aaa",e)}),[]),console.log(2),console.log(l);var P=function(e){console.log(e.target.name);var t=Object(te.a)({},E);t[e.target.name]=e.target.value,v(t)};return r.a.createElement("div",null,console.log(3),r.a.createElement("p",{className:"text-center h4  mb-4"},"Create Roster"),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"6",lg:"5",className:"grey-text"},r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),!(N.getTime()>=D.getTime())){var a=function(e){var a=Object.keys(e),n=[];return a.forEach((function(a,r){var c,o,i=e[a];console.log(a),console.log(l);for(var s=0;s<l.length;s++)if(l[s].title===a){c=l[s].id,o=l[s].group_duration,console.log("true condition");break}for(var u={borderRadius:"5px"},m=0;m<i;m++){var d={id:r+1,group:c,title:"Unallocated",weekNumber:x,start_time:t().add("hour").unix(),end_time:t().add(o,"hour").unix(),canMove:!0,canResize:!0,itemProps:{style:u},staff_id:1,isallocated:!0};n.push(d)}})),n}(E);console.log("shifts = "+a),W.push("/ViewRoster",[a,l,m.weekNumber,N.toISOString().slice(0,10),D.toISOString().slice(0,10),B])}},className:"staff-new-form border border-light p-5"},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"}," ",r.a.createElement(u.s,{size:"lg",label:"Week Number",icon:"calendar",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"weekNumber",minLength:"1",maxLength:"4",onChange:function(e){O(e.target.value)},onInvalid:function(e){return Object(w.invalidNumber)(e,1,2)},onInput:function(e){return Object(w.invalidNumber)(e,1,2)},autoComplete:"new-password",value:m.weekNumber,disabled:!0}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"}," ",r.a.createElement(u.s,{size:"lg",label:"Title",icon:"calendar",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"title",minLength:"1",maxLength:"50",onChange:function(e){q(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,1,50)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,1,50)},autoComplete:"new-password",value:B}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(ae.a,{utils:re.a},r.a.createElement(ne.a,{value:N,onChange:C,format:"do MMMM yyyy",size:"lg",label:"Start Date",required:!0,validate:!0,minDate:new Date})))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(ae.a,{utils:re.a},r.a.createElement(ne.a,{value:D,onChange:T,format:"do MMMM yyyy",size:"lg",label:"End Date",required:!0,validate:!0,minDateMessage:"End Date should be later than Start Date",minDate:new Date(N).setDate(N.getDate()+1)})))),l.map((function(e,t){return r.a.createElement(u.B,{key:t,center:!0},r.a.createElement(u.i,{key:t,sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",className:"grey-text",label:"".concat(e.title," Number Of Shifts"),icon:"users",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:e.title,minLength:"1",maxLength:"2",onChange:P,onInvalid:function(e){return Object(w.invalidNumber)(e,1,2)},onInput:function(e){return Object(w.invalidNumber)(e,1,2)},autoComplete:"new-password"})))})),r.a.createElement(h.a,{type:"submit",value:"Submit",className:"btn btn-primary my-3 btn-block mr-2"},"Create Roster"),r.a.createElement(h.a,{className:"btn btn-primary my-3 btn-block",href:"/admin"},"Back")))))};var ce=function(e){var t=L("/groups"),a=t.data,l=t.request,c=Object(n.useState)({}),i=Object(o.a)(c,2),m=i[0],d=i[1],f=Object(n.useState)(""),g=Object(o.a)(f,2),v=g[0],y=g[1],k=Object(n.useState)(""),x=Object(o.a)(k,2),O=x[0],j=x[1],S=Object(s.g)();Object(n.useEffect)((function(){l()}),[]);var N=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m.staff_role){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,E.a.post("/shift",{newShift:{minDuration:v,title:O,group:m}});case 6:200===(a=e.sent).status&&(console.log(a.statusText),S.replace("/admin")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),alert("".concat(e.t0.response.statusText," \n").concat(e.t0,"\n").concat(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"6",lg:"5",xl:"5",className:"grey-text"},r.a.createElement("form",{onSubmit:N,className:"staff-new-form border border-light p-5"},r.a.createElement("p",{className:"text-center h4  mb-4"},"Shift Screen"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(u.s,{label:"Minimum Duration hrs",icon:"clock",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"minDuration",minLength:"1",maxLength:"2",onChange:function(e){y(e.target.value)},onInvalid:function(e){return Object(w.invalidNumber)(e,1,2)},onInput:function(e){return Object(w.invalidNumber)(e,1,2)},autoComplete:"new-password",value:v}),r.a.createElement(u.s,{label:"Title",icon:"tag",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"title",minLength:"2",maxLength:"20",onChange:function(e){j(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,2,20)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,2,20)},autoComplete:"new-password",value:O}),r.a.createElement("div",{className:"btn-group staff-new-form"},r.a.createElement("button",{type:"button",class:"btn btn-primary"},m.staff_role?m.staff_role:"Groups"),r.a.createElement("button",{type:"button",class:"btn btn-primary dropdown-toggle px-3","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("span",{className:"sr-only"},"Toggle Dropdown")),r.a.createElement("div",{className:"dropdown-menu staff-new-form"},a.map((function(e,t){return r.a.createElement("a",{onClick:function(t){d(e)},key:t,className:"dropdown-item text-center",href:"#"},e.staff_role)}))))),r.a.createElement(h.a,{type:"submit",value:"Submit",className:"btn btn-primary my-3 btn-block mr-2"},"Create New Shift"),r.a.createElement(h.a,{className:"btn btn-primary my-3 btn-block",href:"/admin"},"Back")))))};var oe=function(e){Object(V.a)(e);var t=L("/roster/allRosters"),a=t.data,l=t.request,c=L("/wages1"),o=(c.data,c.request),i=L("/wages1/allusernames"),s=i.data,m=i.request,d=L("/wages1/uniqueroles"),f=(d.data,d.request),p=L("/wages1/eachrosterswagesbyperson"),b=(p.data,p.request);return Object(n.useEffect)((function(){o(),f(),l(),b(),m()}),[]),r.a.createElement(u.k,{fluid:!0,size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(D,null))),r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement("h1",null,"Report Wages"),r.a.createElement(u.B,{center:!0},r.a.createElement(u.l,null,r.a.createElement(h.a,{className:"btn btn-primary mr-0"},"Weekly Wages by Roster"),r.a.createElement(u.o,{caret:!0,color:"primary"}),r.a.createElement(u.n,{basic:!0},a.map((function(e){return r.a.createElement(u.m,{href:"/viewWeeklyWages/".concat(e.roster_id)},e.title)})))),r.a.createElement(u.l,null,r.a.createElement(h.a,{className:"btn btn-primary mr-0"},"Weekly Wages by Job Title"),r.a.createElement(u.o,{caret:!0,color:"primary"}),r.a.createElement(u.n,{basic:!0},a.map((function(e){return r.a.createElement(u.m,{href:"/viewWeeklyJobWages/".concat(e.roster_id)},e.title)})))),r.a.createElement(u.l,null,r.a.createElement(h.a,{className:"btn btn-primary mr-0"},"Weekly Wages by Staff Member"),r.a.createElement(u.o,{caret:!0,color:"primary"}),r.a.createElement(u.n,{basic:!0},s.map((function(e){return r.a.createElement(u.m,{href:"/viewWeeklyStaffWages/".concat(e.username)},e.username)})))))))},ie=a(35),se=a.n(ie),ue=function(e){return new Date(1e3*e).toUTCString()},me=function(e){var t=Number(e);return t<3.5?0:t>=3.5&&t<5?.25:t>=5&&t<8?.5:1},de=function(e){for(var t=[],a=Object.keys(e).length,n=0;n<a;n++)t.push(e[n].username);for(var r=Object(B.a)(new Set(t)),l=[],c=[],o=[],i=[],s=[],u=0;u<r.length;u++){i=[];for(n=0;n<a;n++){var m=0;e[n].username===r[u]&&(0===m&&(i.push(e[n].roster_id),i.push(e[n].username),i.push(e[n].title),i.push(Number(e[n].pay_rate)),i=Object(B.a)(new Set(i))),l.push(Number(e[n].rostered_hours)),c.push(e[n].breakTime),o.push(e[n].actualWorkTime),m+=1)}var d=l.reduce((function(e,t){return e+t}),0),f=c.reduce((function(e,t){return e+t}),0),p=o.reduce((function(e,t){return e+t}),0),b=i[3]*p*100/100;l=[],c=[],o=[];i.push(d,f,p,b),s.push(i)}return s.map((function(e){return{roster_id:e[0],username:e[1],title:e[2],pay_rate:"$"+e[3].toFixed(2),rostered_hours:e[4],breakTime:e[5],acutalWorkTime:e[6],pay:e[7]}}))},fe=function(e){var t=0,a=0,n=0,r=0,l={};return e.map((function(e){t+=e.pay,a+=e.rostered_hours,n+=e.breakTime,r+=e.acutalWorkTime})),l.totalRosteredHours=a,l.totalBreakTimeHours=n,l.totalActualWorkTimeHours=r,l.totalWages=t,l},pe=function(e){var t=[],a={};e.length>0&&(a=e[0]),console.log("*******************");for(var n=0,r=Object.entries(a);n<r.length;n++){var l=Object(o.a)(r[n],2),c=l[0];l[1];t.push(c)}return t},be=r.a.createRef(),ge={orientation:"portrait",unit:"in",format:[3e3,8e3]};var Ee=function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),l=(a[0],a[1],L("/wages1/".concat(e.match.params.rosterID))),c=l.data,i=l.request;c.length>0&&c[0],Object(n.useEffect)((function(){i()}),[]);for(var s=Object.keys(c).length,m=0;m<s;m++)c[m].hasOwnProperty("timeslot_from")&&(c[m].shift_start=ue(Number(c[m].timeslot_from)),c[m].shift_end=ue(Number(c[m].timeslot_to)),c[m].breakTime=me(c[m].rostered_hours),c[m].actualWorkTime=c[m].rostered_hours-c[m].breakTime,c[m].pay=c[m].actualWorkTime*c[m].pay_rate,delete c[m].timeslot_from,delete c[m].timeslot_to,delete c[m].shift_start,delete c[m].shift_end);var d=de(c),f=fe(d);return r.a.createElement(u.k,{fluid:!0,size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(D,null))),r.a.createElement(u.B,null,r.a.createElement(u.i,{size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,null,r.a.createElement(u.i,null,r.a.createElement("div",{style:{width:"100vw"}},r.a.createElement(se.a,{targetRef:be,filename:"roster.pdf",options:ge,x:1,y:.1,scale:1.5},(function(e){var t=e.toPdf;return r.a.createElement(h.a,{onClick:t},"Download pdf")})),r.a.createElement("div",{style:{width:"100vw"},ref:be},r.a.createElement(u.C,{sm:"12",style:{wordBreak:"break-all"},bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,["Roster ID","Username","Job Title","Hourly $ Rate","Rostered Hours","Break Time","Actual Work Time","Total Pay"].map((function(e){return r.a.createElement("th",null,e)})))),r.a.createElement("tbody",null,d.map((function(e){return r.a.createElement("tr",null,Object.values(e).map((function(e,t){return r.a.createElement("td",null,e)})))})),r.a.createElement("tr",null,"Total Wages:",r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,f.totalRosteredHours),r.a.createElement("td",null,f.totalBreakTimeHours),r.a.createElement("td",null,f.totalActualWorkTimeHours),r.a.createElement("td",null,"$",f.totalWages)))))))))),r.a.createElement(u.B,{className:"button-panel"},r.a.createElement(u.i,{sm:"6",md:"5",lg:"4",xl:"3"},r.a.createElement(h.a,{href:"#","btn-block":!0},"Publish")),r.a.createElement(u.i,{sm:"6",md:"5",lg:"4",xl:"3"},r.a.createElement(h.a,{href:"/admin","btn-block":!0},"Back to Admin"))))},he=function(e){for(var t=[],a=Object.keys(e).length,n=0;n<a;n++)t.push(e[n].title);for(var r=Object(B.a)(new Set(t)),l=[],c=[],o=[],i=[],s=[],u=0;u<r.length;u++){i=[];for(n=0;n<a;n++){var m=0;e[n].title===r[u]&&(0===m&&(i.push(e[n].roster_id),i.push(e[n].title),i.push(Number(e[n].pay_rate)),i=Object(B.a)(new Set(i))),l.push(Number(e[n].rostered_hours)),c.push(Number(me(e[n].rostered_hours))),o.push(Number(e[n].rostered_hours-Number(me(e[n].rostered_hours)))),m+=1)}var d=l.reduce((function(e,t){return e+t}),0),f=c.reduce((function(e,t){return e+t}),0),p=o.reduce((function(e,t){return e+t}),0),b=Math.round(i[2]*p*100)/100;l=[],c=[],o=[];i.push(d,f,p,b),s.push(i)}return s.map((function(e){return{roster_id:e[0],title:e[1],pay_rate:"$"+e[2].toFixed(2),rostered_hours:e[3],breakTime:e[4],acutalWorkTime:e[5],pay:e[6]}}))},ve=r.a.createRef(),ye={orientation:"potrait",unit:"in",format:[6e3,1400]};var we=function(e){var t=L("/wages1/jobtitle/".concat(e.match.params.rosterID)),a=t.data,l=t.request;Object(n.useEffect)((function(){l()}),[]),console.log("**************************"),console.log(a);var c=Object.assign({},a),o=he(c),i=(pe(o),fe(o));return r.a.createElement(u.k,{fluid:!0,size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(D,null))),r.a.createElement(u.B,null,r.a.createElement(u.i,{size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,null,r.a.createElement(u.i,null,r.a.createElement("div",{style:{width:"100vw"}},r.a.createElement(se.a,{targetRef:ve,filename:"roster.pdf",options:ye,x:1,y:.1,scale:1.5},(function(e){var t=e.toPdf;return r.a.createElement(h.a,{onClick:t},"Download pdf")})),r.a.createElement("div",{style:{width:"100vw"},ref:ve},r.a.createElement(u.C,{sm:"12",style:{wordBreak:"break-all"},bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,["Roster ID","Job Title","Hourly $ Rate","Rostered Hours","Break Time","Actual Work Time","Total Pay"].map((function(e){return r.a.createElement("th",null,e)})))),r.a.createElement("tbody",null,o.map((function(e){return r.a.createElement("tr",null,Object.values(e).map((function(e,t){return r.a.createElement("td",null,e)})))})),r.a.createElement("tr",null,"Total Wages:",r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,i.totalRosteredHours),r.a.createElement("td",null,i.totalBreakTimeHours),r.a.createElement("td",null,i.totalActualWorkTimeHours),r.a.createElement("td",null,"$",i.totalWages)))))))))),r.a.createElement(u.B,{className:"button-panel"},r.a.createElement(u.i,{sm:"6",md:"5",lg:"4",xl:"3"},r.a.createElement(h.a,{href:"#","btn-block":!0},"Publish")),r.a.createElement(u.i,{sm:"6",md:"5",lg:"4",xl:"3"},r.a.createElement(h.a,{href:"/admin","btn-block":!0},"Back to Admin"))))},ke=function(e){for(var t=[],a=Object.keys(e).length,n=[],r=0;r<a;r++){e[r].roster_id!=l&&e[r].roster_id!=c&&(n.push(e[r].roster_id),n.push(e[r].title),t.push(n));var l=e[r].roster_id,c=e[r].title;n=[]}for(var o=[],i=[],s=[],u=[],m=[],d=0;d<t.length;d++){u=[];for(r=0;r<a;r++){var f=0;e[r].title===t[d][1]&&e[r].roster_id===t[d][0]&&(0===f&&(u.push(e[r].roster_id),u.push(e[r].username),u.push(e[r].title),u.push(Number(e[r].pay_rate)),u=Object(B.a)(new Set(u))),o.push(Number(e[r].rostered_hours)),i.push(me(e[r].rostered_hours)),s.push(e[r].rostered_hours-me(e[r].rostered_hours)),f+=1)}var p=o.reduce((function(e,t){return e+t}),0),b=i.reduce((function(e,t){return e+t}),0),g=s.reduce((function(e,t){return e+t}),0),E=u[3]*g*100/100;o=[],i=[],s=[];u.push(p,b,g,E),u=Object(B.a)(new Set(u)),m.push(u)}return m.map((function(e){return{roster_id:e[0],username:e[1],title:e[2],pay_rate:"$"+e[3],rostered_hours:e[4],breakTime:e[5],acutalWorkTime:e[6],pay:e[7]}}))},xe=r.a.createRef(),Oe={orientation:"potrait",unit:"in",format:[6e3,1400]};var je=function(e){var t=L("/wages1/wagesbydesiredusername/".concat(e.match.params.username)),a=t.data,l=t.request;Object(n.useEffect)((function(){l()}),[]),console.log("**************************");var c=Object.assign({},a),o=ke(c),i=fe(o);return r.a.createElement(u.k,{fluid:!0,size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(D,null))),r.a.createElement(u.B,null,r.a.createElement(u.i,{size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,null,r.a.createElement(u.i,null,r.a.createElement("div",{style:{width:"100vw"}},r.a.createElement(se.a,{targetRef:xe,filename:"roster.pdf",options:Oe,x:1,y:.1,scale:1.5},(function(e){var t=e.toPdf;return r.a.createElement(h.a,{onClick:t},"Download pdf")})),r.a.createElement("div",{style:{width:"100vw"},ref:xe},r.a.createElement(u.C,{sm:"12",style:{wordBreak:"break-all"},bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,["Roster ID","Username","Job Title","Hourly $ Rate","Rostered Hours","Break Time","Actual Work Time","Total Pay"].map((function(e){return r.a.createElement("th",null,e)})))),r.a.createElement("tbody",null,o.map((function(e){return r.a.createElement("tr",null,Object.values(e).map((function(e,t){return r.a.createElement("td",null,e)})))})),r.a.createElement("tr",null,"Total Wages:",r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,i.totalRosteredHours),r.a.createElement("td",null,i.totalBreakTimeHours),r.a.createElement("td",null,i.totalActualWorkTimeHours),r.a.createElement("td",null,"$",i.totalWages)))))))))),r.a.createElement(u.B,{className:"button-panel"},r.a.createElement(u.i,{sm:"6",md:"5",lg:"4",xl:"3"},r.a.createElement(h.a,{href:"#","btn-block":!0},"Publish")),r.a.createElement(u.i,{sm:"6",md:"5",lg:"4",xl:"3"},r.a.createElement(h.a,{href:"/admin","btn-block":!0},"Back to Admin"))))};var Se=function(e){var t=Object(n.useState)({}),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),d=m[0],f=m[1],g=Object(n.useState)(""),v=Object(o.a)(g,2),y=v[0],k=v[1],x=Object(s.g)();Object(n.useEffect)((function(){}),[]);var O=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.a.post("/groups/create",{newGroup:{groupTitle:l,groupDuration:d,payRate:y}});case 4:!0===(a=e.sent).data?(console.log(a.statusText),console.log(a.data),x.replace("/ViewGroups")):alert("Error occured. Could not create new group. This group may already exist."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert("".concat(e.t0.response.statusText," \n").concat(e.t0,"\n").concat(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"6",lg:"5",xl:"5",className:"grey-text"},r.a.createElement("form",{onSubmit:O,className:"staff-new-form border border-light p-5"},r.a.createElement("p",{className:"text-center h4  mb-4"},"Add New Group"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(u.s,{label:"Group Title",icon:"clock",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"groupTitle",minLength:"3",maxLength:"50",onChange:function(e){c(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,3,50)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,3,50)},autoComplete:"new-password"}),r.a.createElement(u.s,{label:"Minimum Duration Hour(s)",icon:"clock",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"groupDuration",minLength:"1",maxLength:"5",onChange:function(e){f(e.target.value)},onInvalid:function(e){return Object(w.invalidNumber)(e,1,5)},onInput:function(e){return Object(w.invalidNumber)(e,1,5)},autoComplete:"new-password"}),r.a.createElement(u.s,{label:"Per Hour Pay Rate",icon:"clock",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"payRate",minLength:"1",maxLength:"9",onChange:function(e){k(e.target.value)},onInvalid:function(e){return Object(w.invalidNumber)(e,1,9)},onInput:function(e){return Object(w.invalidNumber)(e,1,9)},autoComplete:"new-password"})),r.a.createElement(h.a,{type:"submit",value:"Submit",className:"btn btn-primary my-3 btn-block mr-2"},"Create New Group"),r.a.createElement(h.a,{className:"btn btn-primary my-3 btn-block",href:"/ViewGroups"},"Back")))))},Ne=[{label:"ID",key:"id"},{label:"Title",key:"title"},{label:"Minimum Shift Duration Hour",key:"group_duration"},{label:"Per Hour Rate",key:"pay_rate"}],Ce=[{label:"ID",key:"id"},{label:"Title",key:"title"},{label:"Minimum Shift Duration Hour",key:"group_duration"},{label:"Per Hour Rate",key:"pay_rate"}];var _e=function(e){var t=L("/groups/"),a=t.data,l=t.request;return Object(n.useEffect)((function(){l()}),[]),r.a.createElement("div",null,r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(D,null))),r.a.createElement(M.a,{dataSet:a,searchData:Ne,tableData:Ce,handleItemClick:!0,itemClickRedirect:"/GroupEditScreen",itemsPerPage:20}),r.a.createElement(u.B,{className:"button-panel"},r.a.createElement(u.i,null,r.a.createElement(h.a,{href:"/createGroup",block:!0},"Create New Role")),r.a.createElement(u.i,null,r.a.createElement(h.a,{href:"/admin",block:!0},"Back"))))};var Me=function(e){var t=e.data,a=Object(n.useState)(t?t.id:""),l=Object(o.a)(a,1)[0],c=Object(n.useState)(t?t.title:""),i=Object(o.a)(c,2),m=i[0],d=i[1],f=Object(n.useState)(t?t.group_duration:""),g=Object(o.a)(f,2),v=g[0],y=g[1],k=Object(n.useState)(t?t.pay_rate:""),x=Object(o.a)(k,2),O=x[0],j=x[1],S=Object(s.g)(),N=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Delete"),e.next=3,E.a.delete("/groups/delete/".concat(l),{});case 3:a=e.sent,console.log(a.status),200===a.status?(console.log(a.statusText),S.replace("/ViewGroups")):alert(a.statusText);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,E.a.put("/groups/edit/".concat(l),{updatedGroup:{title:m,groupDuration:v,payRate:O}});case 3:a=e.sent,console.log(a.status),200===a.status?(console.log(a.statusText),S.replace("/ViewGroups")):alert(a.statusText);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.classList.add("waves-effect"),t.preventDefault(),e.prev=2,e.next=5,E.a.post("/group",{newGroup:{title:m,groupDuration:v,payRate:O}});case 5:200===(a=e.sent).status&&(console.log(a.statusText),S.replace("/ViewGroups")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert("".concat(e.t0.response.statusText," \n").concat(e.t0,"\n").concat(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7",className:"grey-text"},r.a.createElement("form",{className:"staff-new-form border border-light",onSubmit:t?C:_},r.a.createElement("p",{className:"h5 text-center "},t?"Edit Group":"Add New Group"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{label:"Group Title",icon:"clock",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"groupTitle",minLength:"3",maxLength:"50",onChange:function(e){d(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,3,50)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,3,50)},autoComplete:"new-password",value:m}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{label:"Minimum Duration Hour(s)",icon:"clock",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"groupDuration",minLength:"1",maxLength:"5",onChange:function(e){y(e.target.value)},onInvalid:function(e){return Object(w.invalidNumber)(e,1,5)},onInput:function(e){return Object(w.invalidNumber)(e,1,5)},autoComplete:"new-password",value:v}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"Pay Rate",icon:"address-card",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"address",minLength:"3",maxLength:"50",onChange:function(e){j(e.target.value)},onInvalid:function(e){return Object(w.invalidMinMaxMsg)(e,3,50)},onInput:function(e){return Object(w.invalidMinMaxMsg)(e,3,50)},autoComplete:"new-password",value:O}))),r.a.createElement(u.i,null,r.a.createElement("input",{style:{display:"none"},type:"label",name:"email2"}))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(h.a,{type:"submit",value:"Submit",className:"btn btn-primary my-3 btn-block mr-2"},t?"Update Group":"Create New Group")),t?r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(h.a,{value:"Submit",className:"btn btn-danger my-3 btn-block mr-2",onClick:N},"Remove Group")):"",r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(h.a,{className:"btn btn-primary my-3 btn-block",href:"/ViewGroups"},"Back")))))))};var De=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement(Me,{data:t.state}))};var Te=function(e){Object(V.a)(e);var t=L("/roster/allRosters"),a=t.data,l=t.request;Object(n.useEffect)((function(){l()}),[]);var c=[];return a.map((function(e){c.includes(e.status)||c.push(e.status)})),r.a.createElement(u.B,{center:!0},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(D,null)),r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,{center:!0},c.map((function(e){return r.a.createElement(u.i,{sm:"2",className:"grey-text"},r.a.createElement(u.l,null,r.a.createElement(u.o,{caret:!0,color:"primary"},e),r.a.createElement(u.n,{basic:!0},a.map((function(t){return t.status==e?r.a.createElement(u.m,{href:"/viewWeeklyRoster/".concat(t.roster_id)},t.title):""})))))}))))))},Ie=a(130),Re=(a(247),r.a.createRef()),Be={orientation:"potrait",unit:"in",format:[2500,400]};var Le=function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),l=a[0],c=(a[1],L("/roster/".concat(e.match.params.rosterID))),i=c.data,s=c.request,m={},d={};i.length>0&&(m=i[0],d=i[1]),Object(n.useEffect)((function(){s()}),[]);var f=[];return console.log("shifts",m),Object.values(m).map((function(e,t){e.map((function(e,a){if(0===t&&0==a){var n=new Date(e.week_start),r=new Date(e.week_end),l=(r-n)/1e3/60/60/24;console.log({weekStart:n},{weekEnd:r},{rosterPeriod:l});for(var c=0;c<=l;c++){0;var o=new Date(n);o.setDate(o.getDate()+c),f.push(o.toDateString())}}}))})),console.log({tableHeader:f}),r.a.createElement(u.k,{fluid:!0,size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(D,null))),r.a.createElement(u.B,null,r.a.createElement(u.i,{size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(u.B,null,r.a.createElement(u.i,null,r.a.createElement("div",{style:{width:"100vw"}},r.a.createElement(se.a,{targetRef:Re,filename:"roster.pdf",options:Be,x:.5,y:.5,scale:.5},(function(e){var t=e.toPdf;return r.a.createElement(h.a,{onClick:t},"Download pdf")})),r.a.createElement("div",{style:{width:"100vw"},ref:Re},r.a.createElement(u.C,{sm:"12",style:{wordBreak:"break-all"},bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),f.map((function(e){return r.a.createElement("th",null,e)})),r.a.createElement("th",null,"Total Hours"))),r.a.createElement("tbody",null,Object.keys(m).map((function(e){return r.a.createElement("tr",null,r.a.createElement("th",null,e),f.map((function(t){return r.a.createElement("td",null,Object.values(m).map((function(a){return a.map((function(a,n,c){return e===a.username&&t==a.work_date?""===a.start_time&&t==a.work_date?"":r.a.createElement("p",{onLoad:function(){return l+=(Object(Ie.a)("totalHour"),l+a.shift_duration)}},a.work_date,r.a.createElement("br",null),a.start_time," To "," ",a.end_time,r.a.createElement("br",null),a.break_length," Hour Break",r.a.createElement("br",null),a.shift_duration," Hours"):""}))})))})),r.a.createElement("td",null,m[e].reduce((function(e,t){return e+t.shift_duration}),0)))})),r.a.createElement("tr",null,r.a.createElement("td",null,"Total"),Object.keys(d).map((function(e){return r.a.createElement("td",null,d[e])})),r.a.createElement("td",null,Object.values(d).reduce((function(e,t){return e+t}),0))))))))))),r.a.createElement(u.B,{className:"button-panel"},r.a.createElement(u.i,{sm:"6",md:"5",lg:"4",xl:"3"},r.a.createElement(h.a,{href:"/admin","btn-block":!0},"Back to Admin"))))};var qe=function(e){var t=Object(n.useState)(1),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),s=Object(o.a)(i,2),m=s[0],d=s[1],f=Object(n.useState)({}),g=Object(o.a)(f,2),E=g[0],v=g[1],y=L("/roster/weeks"),w=y.data,k=y.request,x=L("/groups"),O=x.data,j=x.request,S=L("/roster/shifts/".concat(l)),N=(S.data,S.request),C=L("/roster/dates/".concat(l)).request,_=Object(n.useState)(!1),M=Object(o.a)(_,2),D=M[0],T=M[1],I=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return t=e.sent,a=t.data,c(a[0].week_number),e.next=7,N();case 7:return n=e.sent,e.next=10,C();case 10:r=e.sent,d(n.data),v(r.data[0]);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){I(),j(),console.log("date",K()(159831e10))}),[]),console.log("shifts length ",m.length),console.log("roster period data"+E.start_date),r.a.createElement("div",null,"View Roster Screen",r.a.createElement(u.c,null,r.a.createElement(u.l,null,r.a.createElement(h.a,{className:"btn btn-primary mr-0"}," ",D?l:"Select Week"),r.a.createElement(u.o,{caret:!0,color:"primary"}),r.a.createElement(u.n,{color:"primary"},w.map((function(e,t){return r.a.createElement(u.m,{key:t,onMouseLeave:Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return t=e.sent,a=t.data,d(a),e.next=7,C();case 7:n=e.sent,v(n.data[0]),T(!0);case 10:case"end":return e.stop()}}),e)}))),onClick:function(t){T(!1),c(e.week_number)}},e.week_number)}))))),D&&r.a.createElement(Z,{shifts:m,groups:O,weekNumber:l,create:!1,startDate:E.start_date,endDate:E.end_date,title:E.title}))};var We=function(e){var t=Object(n.useState)(new Date),a=Object(o.a)(t,2),l=a[0],c=a[1];return r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7",className:"grey-text"},r.a.createElement("form",{className:"staff-new-form border border-light"},r.a.createElement("p",{className:"h5 text-center "},"Roster Admin"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7",className:"staff-new-form"},r.a.createElement(ae.a,{utils:re.a},r.a.createElement(ne.b,{value:l,onChange:c,format:"dd/MM/yyyy",size:"lg",label:"Start Date"})))),r.a.createElement(u.B,{center:!0},r.a.createElement(u.i,{sm:"12",md:"9",lg:"7"},r.a.createElement(u.s,{size:"lg",label:"Roster Duration Days",icon:"calendar-alt",group:!0,type:"text",validate:!0,error:"wrong",success:"right",required:!0,name:"firstname",minLength:"1",maxLength:"2",onInvalid:function(e){return Object(w.invalidNumber)(e,2,20)},onInput:function(e){return Object(w.invalidNumber)(e,2,20)},autoComplete:"new-password"})))))))},Pe=a(134);var He=function(e){var t=e.component,a=Object(Pe.a)(e,["component"]),n=y().authTokens;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))};var Ae=function(e){var t=JSON.parse(localStorage.getItem("tokens"));console.log("existingitem",t);var a=Object(n.useState)(t),l=Object(o.a)(a,2),c=l[0],m=l[1];return r.a.createElement(v.Provider,{value:{authTokens:c,setAuthTokens:function(e){localStorage.setItem("tokens",JSON.stringify(e)),m(e)}}},r.a.createElement(i.a,null,r.a.createElement(s.d,null,r.a.createElement(u.k,{className:"wrapper screen-font",fluid:!0},r.a.createElement(u.B,{className:"header"},r.a.createElement(u.i,{size:"12",sm:"12",lg:"12"},r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement("center",null,"Roster Application")," ")))),r.a.createElement(u.B,{className:"navigation"},r.a.createElement(u.i,{size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(A,null))),r.a.createElement(u.B,{className:"main-content"},r.a.createElement(u.i,{size:"12",sm:"12",md:"12",lg:"12",xl:"12"},r.a.createElement(s.b,{path:"/wages",component:oe}),r.a.createElement(s.b,{path:"/viewWeeklyWages/:rosterID",component:Ee}),r.a.createElement(s.b,{path:"/viewWeeklyJobWages/:rosterID",component:we}),r.a.createElement(s.b,{path:"/viewWeeklyStaffWages/:username",component:je}),r.a.createElement(He,{path:"/rosterAdmin",component:We}),r.a.createElement(He,{path:"/ViewRoster",component:ee}),r.a.createElement(He,{path:"/ViewRosterScreen",component:Te}),r.a.createElement(He,{path:"/ViewRosterScreen2",component:qe}),r.a.createElement(s.b,{path:"/about",component:N}),r.a.createElement(s.b,{path:"/contact",component:d}),r.a.createElement(He,{path:"/admin",component:H}),r.a.createElement(s.b,{path:"/register",component:z}),r.a.createElement(s.b,{path:"/login",component:k}),null!=c&&(c.role.includes("Manager")||c.role.includes("Supervisor"))?r.a.createElement(r.a.Fragment,null,r.a.createElement(He,{path:"/StaffNewScreen",component:W}),r.a.createElement(He,{path:"/StaffEditScreen",component:P}),r.a.createElement(He,{path:"/ViewGroups",component:_e}),r.a.createElement(He,{path:"/GroupEditScreen",component:De}),r.a.createElement(He,{path:"/CreateRosterScreen",component:le}),r.a.createElement(He,{path:"/createGroup",component:Se}),r.a.createElement(He,{path:"/StaffListScreen",component:R})):"",r.a.createElement(He,{path:"/PublicHolidays",component:U}),r.a.createElement(He,{path:"/viewWeeklyRoster/:rosterID",component:Le}),r.a.createElement(He,{path:"/AdminShiftScreen",component:ce}),r.a.createElement(s.b,{exact:!0,path:"/",component:_})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(248),a(249),a(250);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},53:function(e,t,a){},6:function(e,t){var a=function(e,t){e.style.borderColor=t,e.previousElementSibling.style.color=t,e.nextElementSibling.style.color=t},n=function(e){e.style.borderColor="",e.previousElementSibling.style.color="",e.nextElementSibling.style.color=""};e.exports={displayInvalid:a,displayValid:n,invalidEmailMsg:function(e){return console.log("e = ",e.target),""===e.target.value?(a(e.target,"red"),e.target.setCustomValidity("Required email address")):e.target.validity.patternMismatch?(a(e.target,"red"),e.target.setCustomValidity("please enter a valid email address")):(e.target.setCustomValidity(""),n(e.target)),!0},invalidMinMaxMsg:function(e,t,r){console.log(e);var l=e.target.nextElementSibling.textContent;return""===e.target.value?(e.target.setCustomValidity("".concat(l," is required")),a(e.target,"red")):e.target.validity.tooShort?(e.target.setCustomValidity("".concat(l," needs to be at least ").concat(t," characters long.")),a(e.target,"red")):e.target.validity.tooLong?(e.target.setCustomValidity("".concat(l," name needs to be between ").concat(t," and ").concat(r," characters long.")),a(e.target,"red")):(e.target.setCustomValidity(""),n(e.target)),!0},invalidNumber:function(e,t,r){var l=e.target.nextElementSibling.textContent;return""===e.target.value?(e.target.setCustomValidity("".concat(l," is required")),a(e.target,"red")):isNaN(e.target.value)?(e.target.setCustomValidity("".concat(l," needs to be Numeric.")),a(e.target,"red")):e.target.validity.tooShort?(e.target.setCustomValidity("".concat(l," needs to be ").concat(t," characters long.")),a(e.target,"red")):e.target.validity.tooLong?(e.target.setCustomValidity("".concat(l," needs to be ").concat(r," characters long.")),a(e.target,"red")):(e.target.setCustomValidity(""),n(e.target)),!0}}}},[[152,1,2]]]);
//# sourceMappingURL=main.40a020a3.chunk.js.map